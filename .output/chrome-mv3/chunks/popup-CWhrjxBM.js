(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();try{}catch(e){console.error("[wxt] Failed to initialize plugins",e)}const g=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,n=g,r=document.getElementById("status"),h=document.getElementById("theme-section"),l=document.getElementById("enabled-toggle"),f=document.querySelectorAll(".theme-btn");let i=null;async function b(){r.textContent="Detecting...",r.className="status detecting";const{enabled:e=!0}=await n.storage.local.get("enabled");l.checked=e;const[t]=await n.tabs.query({active:!0,currentWindow:!0});if(i=t,!t?.id){d("No active tab");return}try{(await n.tabs.sendMessage(t.id,{type:"getStatus"}))?.isMdBook?y():d("Not an mdBook site")}catch{d("Not an mdBook site")}}function d(e){r.textContent=e,r.className="status not-mdbook",h.classList.add("hidden")}function y(){r.textContent="mdBook detected",r.className="status mdbook",h.classList.remove("hidden"),n.storage.local.get("mdbookTheme").then(({mdbookTheme:e})=>{u(e||"mintlify")})}function u(e){f.forEach(t=>{const a=t.getAttribute("data-theme");t.classList.toggle("active",a===e)})}f.forEach(e=>{e.addEventListener("click",async()=>{const t=e.getAttribute("data-theme");!t||!i?.id||(await n.storage.local.set({mdbookTheme:t}),u(t),await n.tabs.sendMessage(i.id,{type:"setTheme",theme:t}))})});l.addEventListener("change",async()=>{await n.storage.local.set({enabled:l.checked}),i?.id&&n.tabs.reload(i.id)});n.runtime.onMessage.addListener(e=>{e.type==="themeChanged"&&u(e.theme)});b();
