var background=(function(){"use strict";function s(e){return e==null||typeof e=="function"?{main:e}:e}const o=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,c=s(()=>{o.tabs.onUpdated.addListener(async(e,r,a)=>{if(r.status==="complete"&&a.url)try{(await o.tabs.sendMessage(e,{type:"getStatus"}))?.isMdBook?(o.action.setBadgeText({tabId:e,text:"M"}),o.action.setBadgeBackgroundColor({tabId:e,color:"#6c63ff"})):o.action.setBadgeText({tabId:e,text:""})}catch{o.action.setBadgeText({tabId:e,text:""})}})});function l(){}function t(e,...r){}const i={debug:(...e)=>t(console.debug,...e),log:(...e)=>t(console.log,...e),warn:(...e)=>t(console.warn,...e),error:(...e)=>t(console.error,...e)};let n;try{n=c.main(),n instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw i.error("The background crashed on startup!"),e}return n})();
